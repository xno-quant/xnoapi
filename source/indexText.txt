XNO API Library
===============

⚠️ Ghi chú: Tài liệu này bắt đầu bằng Tiếng Việt cho cộng đồng địa phương. 🌐 Phiên bản Tiếng Anh có sẵn bên dưới — cuộn xuống hoặc sử dụng mục lục để điều hướng.

Chào mừng bạn đến với XNO API, thư viện Python toàn diện cho phân tích định lượng và truy xuất dữ liệu tài chính, được tối ưu hóa đặc biệt cho thị trường tài chính Việt Nam.

Với sứ mệnh "Đưa công cụ phân tích định lượng đến gần hơn với mọi nhà đầu tư Việt Nam", XNO API liên tục phát triển, tích hợp công nghệ hiện đại để không chỉ đáp ứng nhu cầu dữ liệu, mà còn giúp bạn xây dựng các chiến lược giao dịch thông minh và hiệu quả.

✨ Tính năng nổi bật
--------------------

- Hoàn toàn miễn phí & mã nguồn mở: Dễ dàng truy cập và sử dụng.
- Giải pháp Python toàn diện: API thân thiện, dễ tích hợp.
- Dữ liệu Việt Nam chuyên sâu: Cổ phiếu, chỉ số, phái sinh, quỹ mở, dữ liệu quốc tế.
- Công cụ phân tích mạnh mẽ: Metrics, backtesting, đánh giá rủi ro.

Tham gia cộng đồng
------------------

- Website: `xno.vn <https://xno.vn>`_
- Cộng đồng Quant: `xnoquant.vn <https://xnoquant.vn>`_

🚀 Tại sao chọn XNO API?
------------------------

XNO API giúp rút ngắn thời gian xử lý dữ liệu, hỗ trợ học tập, nghiên cứu và xây dựng hệ thống phân tích giao dịch định lượng hiệu quả – không chỉ là công cụ trích xuất dữ liệu, mà là nền tảng để phát triển giải pháp đầu tư thông minh cá nhân.

📦 Cài đặt
----------

Cài đặt qua PyPI:

.. code-block:: bash

   pip install xnoapi

Hoặc từ GitHub:

.. code-block:: bash

   git clone https://github.com/xnoproject/xnoapi.git
   pip install ./xnoapi

Bắt đầu sử dụng
---------------

.. code-block:: python

   from xnoapi import client
   from xnoapi.vn.data import stocks, derivatives
   from xnoapi.vn.metrics import Metrics, Backtest_Derivates

   # Khởi tạo client với API key
   client(apikey="your_api_key")

📚 Tài liệu & Hỗ trợ
--------------------

- Tài liệu trực tuyến: `https://xnoapi.readthedocs.io <https://xnoapi.readthedocs.io>`_
- Hướng dẫn chi tiết: `xno.vn/docs <https://xno.vn/docs>`_
- Hỗ trợ cộng đồng: `xnoquant.vn <https://xnoquant.vn>`_

🎯 Ví dụ sử dụng cơ bản
-----------------------

Truy xuất dữ liệu cổ phiếu và phái sinh Việt Nam
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. code-block:: python

   from xnoapi.vn.data.utils import client
   from xnoapi.vn.data import stocks, derivatives

   # Khởi tạo client
   client(apikey="your_api_key")

   # Danh sách cổ phiếu có tính thanh khoản cao
   liquid_stocks = stocks.list_liquid_asset()
   print("Cổ phiếu thanh khoản cao:", liquid_stocks)

   # Dữ liệu lịch sử cổ phiếu VIC (Vingroup)
   from xnoapi.vn.data import get_stock_hist
   vic_data = get_stock_hist("VIC", resolution='h')
   print("Dữ liệu VIC:")
   print(vic_data.head())

   # Dữ liệu phái sinh VN30F1M theo khung thời gian 1 phút
   from xnoapi.vn.data import get_derivatives_hist
   vn30f1m_data = get_derivatives_hist("VN30F1M", "1m")
   print("Dữ liệu VN30F1M:")
   print(vn30f1m_data.head())

📊 Dữ liệu tài chính (Quant Data API v2)
----------------------------------------

Một số tiện ích dữ liệu định lượng tiêu biểu:

.. code-block:: python

   from xnoapi.vn.data import (
       ping,
       get_indices,
       get_market_index_snapshot,
       get_stock_info,
       get_stock_matches,
       get_stock_foreign_trading,
       get_stock_top_price,
   )

   print("Ping:", "OK" if ping() else "FAILED")
   print("Indices:")
   print(get_indices().head())

   print("VNINDEX snapshot:")
   print(get_market_index_snapshot("VNINDEX").head(1))

Quote/Company/Finance (cổ phiếu Việt Nam)
-----------------------------------------

.. code-block:: python

   from xnoapi.vn.data.stocks import Quote, Company, Finance

   q = Quote("ACB")
   q.history(start="2024-01-01", end="2024-03-31", interval="1D")
   q.intraday(page_size=200)
   q.price_depth()

   c = Company("HPG")
   c.overview(); c.profile(); c.shareholders(); c.officers(); c.subsidiaries(); c.events(); c.news(); c.ratio_summary()

   f = Finance("ACB")
   f.income_statement(period="year")
   f.balance_sheet(period="year")
   f.cash_flow(period="year")

Quỹ mở và Thị trường quốc tế
----------------------------

.. code-block:: python

   from xnoapi.vn.data.stocks import Fund, Global

   fund = Fund()
   df_funds = fund.listing(fund_type="STOCK")
   fund.filter("RVPIF")

   glb = Global()
   glb.fx("USDVND").quote.history(start="2024-01-01", end="2024-12-31")
   glb.crypto("BTCUSD").quote.history(start="2024-01-01", end="2024-12-31")
   glb.world_index("DJI").quote.history(start="2024-01-01", end="2024-12-31")

📈 Phân tích & Backtesting
--------------------------

``xnoapi.vn.metrics.Metrics`` bao gồm: Sharpe, Sortino, Calmar, Max Drawdown, Average Gain/Loss, Win Rate, Profit Factor, VaR, Risk of Ruin.

``xnoapi.vn.metrics.Backtest_Derivates`` hỗ trợ backtest phái sinh với phí chuẩn Việt Nam và PnL thô/sau phí.

``xnoapi.metrics.TradingBacktest`` cung cấp TP/SL cố định và Trailing SL:

.. code-block:: python

   from xnoapi.metrics import TradingBacktest

   backtester = TradingBacktest(df_with_signals)
   df_tp_sl = backtester.apply_tp_sl(df_with_signals, tp_percentage=2.0, sl_percentage=1.5)

📚 Ví dụ mở rộng (theo README)
-----------------------------

5. Ping + Danh sách chỉ số + Snapshot VNINDEX
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. code-block:: python

   from xnoapi.vn.data import (
       Company, Finance, Fund, Listing, Quote, Global, MSN,
       list_liquid_asset,
       get_indices, get_market_index_snapshot,
       get_stock_foreign_trading, get_stock_matches, get_stock_info, get_stock_top_price,
       Trading,
       get_derivatives_hist,
   )

   print("Ping:", 'OK' if Trading and True else 'Loaded')
   print("Indices:")
   print(get_indices().head(1))

   print("VNINDEX snapshot:")
   print(get_market_index_snapshot('VNINDEX').head(1))

6. Thông tin cổ phiếu HPG (info, matches, top price, foreign)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. code-block:: python

   symbol = 'HPG'
   print("Stock info HPG:")
   print(get_stock_info(symbol).head(1))

   print("Stock matches HPG:")
   print(get_stock_matches(symbol).head(1))

   print("Stock top price HPG:")
   print(get_stock_top_price(symbol).head(1))

   print("Foreign trading:")
   print(get_stock_foreign_trading(symbol).head(1))

7. Company/Finance/Fund/Listing (ví dụ với HPG)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. code-block:: python

   comp = Company('HPG')
   print('Company overview:')
   print(comp.overview().head(1))

   print('Company profile:')
   print(comp.profile().head(1))

   fin = Finance('HPG')
   print('Income statement (year):')
   print(fin.income_statement(period='year').head(1))

   f = Fund()
   print('Funds listing (head):')
   print(f.listing().head(1))

   lst = Listing()
   print('Listing symbols_by_exchange:')
   print(lst.symbols_by_exchange())

8. Global quotes
^^^^^^^^^^^^^^^^

.. code-block:: python

   g = Global()
   print('FX EURUSD:')
   df_fx = g.fx('EURUSD').quote.history('2024-01-01', '2024-03-01', '1h')
   print(df_fx.head())

9. Demo backtest MA(20/50) đơn giản (VIC, timeframe giờ)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. code-block:: python

   from xnoapi.vn.metrics.backtest import Backtest_Stock
   from xnoapi.vn.data import get_stock_hist
   import pandas as pd

   df = get_stock_hist('VIC', resolution='h')
   df = df[['Date', 'time', 'Close']].dropna().copy()

   close = pd.to_numeric(df['Close'], errors='coerce')
   ma20  = close.rolling(20, min_periods=20).mean()
   ma50  = close.rolling(50, min_periods=50).mean()
   signal = (ma20 > ma50).astype(int).shift(1).fillna(0)

   df['position'] = signal * 100
   bt_input = df[['Date', 'time', 'Close', 'position']]
   bt = Backtest_Stock(bt_input, pnl_type='after_fees')
   # bt.plot_PNL("VIC – MA(20/50) long-only")

🆕 Tính năng mới
----------------

- Quant Data API v2: OHLCV theo giây, order book snapshot, foreign trading, index snapshot
- Quỹ mở & tài sản quốc tế: NAV, danh mục, forex/crypto/world indices
- TP/SL nâng cao: Fixed và Trailing
- Metrics mở rộng: Risk of Ruin, VaR, Calmar, Sortino nâng cao

🌟 Cộng đồng & Đóng góp
-----------------------

- Website: `xno.vn <https://xno.vn>`_
- Cộng đồng: `xnoquant.vn <https://xnoquant.vn>`_
- Hỗ trợ: support@xno.vn
- Báo lỗi/đề xuất: GitHub Issues

⚠️ Tuyên bố miễn trách nhiệm
----------------------------

XNO API dành cho nghiên cứu và sử dụng cá nhân. Dữ liệu có thể không đầy đủ hoặc sai lệch; không khuyến nghị dùng trực tiếp cho giao dịch thực tế khi chưa hiểu rõ. Tác giả không chịu trách nhiệm cho tổn thất phát sinh do sử dụng dữ liệu hoặc mã nguồn.

📄 Giấy phép
------------

XNO API phát hành theo giấy phép MIT. Xem chi tiết tại `LICENSE <https://github.com/xnoproject/xnoapi/blob/main/LICENSE>`_.
