# XNO API Library

âš ï¸ **Ghi chÃº**: TÃ i liá»‡u nÃ y báº¯t Ä‘áº§u báº±ng Tiáº¿ng Viá»‡t cho cá»™ng Ä‘á»“ng Ä‘á»‹a phÆ°Æ¡ng. ğŸŒ PhiÃªn báº£n Tiáº¿ng Anh cÃ³ sáºµn bÃªn dÆ°á»›i â€” cuá»™n xuá»‘ng hoáº·c sá»­ dá»¥ng má»¥c lá»¥c Ä‘á»ƒ Ä‘iá»u hÆ°á»›ng.

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i **XNO API**, thÆ° viá»‡n Python toÃ n diá»‡n cho phÃ¢n tÃ­ch Ä‘á»‹nh lÆ°á»£ng vÃ  truy xuáº¥t dá»¯ liá»‡u tÃ i chÃ­nh, Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a Ä‘áº·c biá»‡t cho thá»‹ trÆ°á»ng tÃ i chÃ­nh Viá»‡t Nam.

Vá»›i sá»© má»‡nh *"ÄÆ°a cÃ´ng cá»¥ phÃ¢n tÃ­ch Ä‘á»‹nh lÆ°á»£ng Ä‘áº¿n gáº§n hÆ¡n vá»›i má»i nhÃ  Ä‘áº§u tÆ° Viá»‡t Nam"*, XNO API liÃªn tá»¥c phÃ¡t triá»ƒn, tÃ­ch há»£p nhá»¯ng cÃ´ng nghá»‡ hiá»‡n Ä‘áº¡i Ä‘á»ƒ khÃ´ng chá»‰ Ä‘Ã¡p á»©ng nhu cáº§u cÆ¡ báº£n vá» dá»¯ liá»‡u, mÃ  cÃ²n giÃºp báº¡n xÃ¢y dá»±ng cÃ¡c chiáº¿n lÆ°á»£c giao dá»‹ch thÃ´ng minh vÃ  hiá»‡u quáº£.

## âœ¨ TÃ­nh nÄƒng ná»•i báº­t

ğŸ†“ **HoÃ n toÃ n miá»…n phÃ­ & mÃ£ nguá»“n má»Ÿ**: Dá»… dÃ ng truy cáº­p vÃ  sá»­ dá»¥ng, phÃ¹ há»£p vá»›i nhÃ  Ä‘áº§u tÆ° cÃ¡ nhÃ¢n, nhÃ  phÃ¢n tÃ­ch Ä‘á»‹nh lÆ°á»£ng, vÃ  cá»™ng Ä‘á»“ng nghiÃªn cá»©u.

ğŸ **Giáº£i phÃ¡p Python toÃ n diá»‡n**: CÃ¡c hÃ m chá»©c nÄƒng thÃ¢n thiá»‡n, dá»… dÃ ng tÃ­ch há»£p Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c há»‡ thá»‘ng giao dá»‹ch tá»± Ä‘á»™ng.

ğŸ“Š **Dá»¯ liá»‡u Viá»‡t Nam chuyÃªn sÃ¢u**: Bao gá»“m cá»• phiáº¿u, chá»‰ sá»‘, phÃ¡i sinh, quá»¹ má»Ÿ, dá»¯ liá»‡u quá»‘c táº¿ vá»›i cáº¥u trÃºc phÃ­ giao dá»‹ch chuáº©n Viá»‡t Nam.

ğŸ“ˆ **CÃ´ng cá»¥ phÃ¢n tÃ­ch máº¡nh máº½**: TÃ­ch há»£p sáºµn cÃ¡c chá»‰ sá»‘ hiá»‡u suáº¥t, backtesting, vÃ  Ä‘Ã¡nh giÃ¡ rá»§i ro.

Báº¡n chÃ­nh lÃ  má»™t pháº§n quan trá»ng trong hÃ nh trÃ¬nh chuyá»ƒn Ä‘á»•i sá»‘ thá»‹ trÆ°á»ng tÃ i chÃ­nh Viá»‡t Nam. HÃ£y cÃ¹ng XNO táº¡o nÃªn nhá»¯ng thay Ä‘á»•i tÃ­ch cá»±c vÃ  hiá»‡u quáº£!

### Tham gia ngay cá»™ng Ä‘á»“ng XNO Ä‘á»ƒ giao lÆ°u, chia sáº» kinh nghiá»‡m vÃ  cáº­p nháº­t nhá»¯ng tÃ­nh nÄƒng má»›i nháº¥t:

ğŸŒ **Website chÃ­nh thá»©c**: [xno.vn](https://xno.vn)  
ğŸ‘¥ **Cá»™ng Ä‘á»“ng Quant Finance**: [xnoquant.vn](https://xnoquant.vn)

## ğŸš€ Táº¡i sao chá»n XNO API?

XNO API giÃºp rÃºt ngáº¯n thá»i gian xá»­ lÃ½ dá»¯ liá»‡u, há»— trá»£ há»c táº­p, nghiÃªn cá»©u vÃ  xÃ¢y dá»±ng há»‡ thá»‘ng phÃ¢n tÃ­ch giao dá»‹ch Ä‘á»‹nh lÆ°á»£ng má»™t cÃ¡ch hiá»‡u quáº£ â€“ khÃ´ng chá»‰ lÃ  má»™t cÃ´ng cá»¥ trÃ­ch xuáº¥t dá»¯ liá»‡u, mÃ  lÃ  ná»n táº£ng Ä‘á»ƒ phÃ¡t triá»ƒn giáº£i phÃ¡p Ä‘áº§u tÆ° thÃ´ng minh cÃ¡ nhÃ¢n.

### ğŸ” Truy xuáº¥t dá»¯ liá»‡u toÃ n diá»‡n
- **Cá»• phiáº¿u Viá»‡t Nam**: Dá»¯ liá»‡u lá»‹ch sá»­, realtime, thÃ´ng tin doanh nghiá»‡p
- **PhÃ¡i sinh**: VN30F1M, VN30F2M vá»›i dá»¯ liá»‡u táº§n suáº¥t cao
- **Quá»¹ má»Ÿ**: ThÃ´ng tin quá»¹, NAV, danh má»¥c Ä‘áº§u tÆ°
- **Thá»‹ trÆ°á»ng quá»‘c táº¿**: Chá»‰ sá»‘ tháº¿ giá»›i, forex, cryptocurrency
- **Dá»¯ liá»‡u Ä‘á»‹nh lÆ°á»£ng**: OHLCV, order book, foreign trading

### ğŸ“Š Dá»¯ liá»‡u thá»‹ trÆ°á»ng Ä‘a dáº¡ng
Tá»« giÃ¡ cá»• phiáº¿u thá»i gian thá»±c Ä‘áº¿n dá»¯ liá»‡u bÃ¡o cÃ¡o tÃ i chÃ­nh, tá»« phÃ¡i sinh VN30 Ä‘áº¿n cÃ¡c chá»‰ sá»‘ quá»‘c táº¿ nhÆ° S&P 500, Nikkei 225.

### ğŸ“ˆ CÃ´ng cá»¥ phÃ¢n tÃ­ch hiá»‡u suáº¥t
TÃ­ch há»£p sáºµn cÃ¡c chá»‰ sá»‘ Sharpe, Sortino, Max Drawdown, Win Rate, Value at Risk vÃ  nhiá»u metrics quan trá»ng khÃ¡c.

### ğŸ§ª Backtesting chuyÃªn nghiá»‡p
Há»— trá»£ backtest chiáº¿n lÆ°á»£c vá»›i cáº¥u trÃºc phÃ­ giao dá»‹ch chuáº©n thá»‹ trÆ°á»ng Viá»‡t Nam, tÃ­nh toÃ¡n PnL chÃ­nh xÃ¡c, há»— trá»£ Take Profit/Stop Loss.

### ğŸ–¼ï¸ TÃ­ch há»£p visualization
Dá»… dÃ ng má»Ÿ rá»™ng Ä‘á»ƒ táº¡o cÃ¡c biá»ƒu Ä‘á»“ vÃ  bÃ¡o cÃ¡o trá»±c quan cho chiáº¿n lÆ°á»£c giao dá»‹ch.

## ğŸ“¦ CÃ i Ä‘áº·t

Báº¡n cÃ³ thá»ƒ cÃ i Ä‘áº·t thÆ° viá»‡n báº£n phÃ¡t hÃ nh á»•n Ä‘á»‹nh qua PyPI vá»›i cÃ¢u lá»‡nh sau:

```bash
pip install xnoapi
```

Hoáº·c cÃ i Ä‘áº·t tá»« mÃ£ nguá»“n GitHub:

```bash
git clone https://github.com/xnoproject/xnoapi.git
pip install ./xnoapi
```

## Báº¯t Ä‘áº§u sá»­ dá»¥ng

Báº¡n cáº§n náº¡p thÆ° viá»‡n vÃ o mÃ´i trÆ°á»ng Python vÃ  khá»Ÿi táº¡o API key:

```python
from xnoapi import client
from xnoapi.vn.data import stocks, derivatives
from xnoapi.vn.metrics import Metrics, Backtest_Derivates

# Khá»Ÿi táº¡o client vá»›i API key
client(apikey="your_api_key")
```

## ğŸ“š TÃ i liá»‡u hÆ°á»›ng dáº«n

ğŸ“– **TÃ i liá»‡u trá»±c tuyáº¿n**: https://xnoapi.readthedocs.io  
ğŸ“„ **PhiÃªn báº£n PDF**: Táº£i xuá»‘ng  
ğŸ¯ **HÆ°á»›ng dáº«n chi tiáº¿t**: [xno.vn/docs](https://xno.vn/docs)  
ğŸ’¬ **Há»— trá»£ cá»™ng Ä‘á»“ng**: [xnoquant.vn](https://xnoquant.vn)

## ğŸ¯ VÃ­ dá»¥ sá»­ dá»¥ng cÆ¡ báº£n

### Truy xuáº¥t dá»¯ liá»‡u cá»• phiáº¿u vÃ  phÃ¡i sinh Viá»‡t Nam

```python
from xnoapi.vn.data.utils import client
from xnoapi.vn.data import stocks, derivatives
from xnoapi.vn.data.quant_data import get_indices

# Khá»Ÿi táº¡o client
client(apikey="your_api_key")

# Danh sÃ¡ch cá»• phiáº¿u cÃ³ tÃ­nh thanh khoáº£n cao
liquid_stocks = stocks.list_liquid_asset()
print("Cá»• phiáº¿u thanh khoáº£n cao:", liquid_stocks)

# Dá»¯ liá»‡u lá»‹ch sá»­ cá»• phiáº¿u VIC (Vingroup)
vic_data = stocks.get_hist("VIC")
print("Dá»¯ liá»‡u VIC:")
print(vic_data.head())

# Dá»¯ liá»‡u phÃ¡i sinh VN30F1M theo khung thá»i gian 1 phÃºt
vn30f1m_data = derivatives.get_hist("VN30F1M", "1m")
print("Dá»¯ liá»‡u VN30F1M:")
print(vn30f1m_data.head())
```

## ğŸ§  Cáº¥u trÃºc thÆ° viá»‡n

### ğŸ“Š Dá»¯ liá»‡u tÃ i chÃ­nh

#### `xnoapi.vn.data.stocks`
- `list_liquid_asset()`: Danh sÃ¡ch cá»• phiáº¿u cÃ³ tÃ­nh thanh khoáº£n cao trÃªn thá»‹ trÆ°á»ng Viá»‡t Nam
- `get_hist(asset)`: Dá»¯ liá»‡u OHLCV lá»‹ch sá»­ cá»§a cá»• phiáº¿u

#### `xnoapi.vn.data.derivatives`
- `get_hist(asset, frequency)`: Dá»¯ liá»‡u thá»‹ trÆ°á»ng phÃ¡i sinh (VN30F1M, VN30F2M)
- Há»— trá»£ cÃ¡c frequency: "1m", "5m", "15m", "30m", "1H", "1D"

#### `xnoapi.vn.data.quant_data` [Má»šI]
Module dá»¯ liá»‡u Ä‘á»‹nh lÆ°á»£ng chuyÃªn sÃ¢u vá»›i API v2:
- `ping()`: Kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n dá»‹ch vá»¥
- `get_indices()`: Danh sÃ¡ch cÃ¡c chá»‰ sá»‘ thá»‹ trÆ°á»ng
- `get_market_index_snapshot(index_symbol)`: Snapshot chá»‰ sá»‘ (VNI, HNX-Index, v.v.)
- `get_stock_info(symbol)`: ThÃ´ng tin cá»• phiáº¿u realtime
- `get_stock_matches(symbol)`: Dá»¯ liá»‡u khá»›p lá»‡nh gáº§n nháº¥t
- `get_stock_foreign_trading(symbol)`: Giao dá»‹ch khá»‘i ngoáº¡i
- `get_stock_top_price(symbol)`: Order book snapshot

#### `xnoapi.vn.data.quote_market`
- `Quote(symbol).history(start, end, interval)`: Dá»¯ liá»‡u lá»‹ch sá»­ 
- `Quote(symbol).intraday(page_size, last_time)`: Dá»¯ liá»‡u tick intraday
- `Quote(symbol).price_depth()`: Äá»™ sÃ¢u giÃ¡ (accumulated volume)

#### `xnoapi.vn.data.company` (ThÃ´ng tin doanh nghiá»‡p)
- `Company(symbol).overview()`: Tá»•ng quan cÃ´ng ty
- `Company(symbol).profile()`: ThÃ´ng tin chi tiáº¿t
- `Company(symbol).shareholders()`: Cá»• Ä‘Ã´ng lá»›n
- `Company(symbol).officers()`: Ban lÃ£nh Ä‘áº¡o
- `Company(symbol).subsidiaries()`: CÃ´ng ty con
- `Company(symbol).events()`: Sá»± kiá»‡n quan trá»ng
- `Company(symbol).news()`: Tin tá»©c hoáº¡t Ä‘á»™ng
- `Company(symbol).ratio_summary()`: Tá»· sá»‘ tÃ i chÃ­nh

#### `xnoapi.vn.data.finance` (BÃ¡o cÃ¡o tÃ i chÃ­nh)
- `Finance(symbol).income_statement(period='year')`: BÃ¡o cÃ¡o káº¿t quáº£ kinh doanh
- `Finance(symbol).balance_sheet(period='year')`: Báº£ng cÃ¢n Ä‘á»‘i káº¿ toÃ¡n
- `Finance(symbol).cash_flow(period='year')`: BÃ¡o cÃ¡o lÆ°u chuyá»ƒn tiá»n tá»‡

#### `xnoapi.vn.data.fund` [Má»šI] (Quá»¹ má»Ÿ)
- `Fund().listing(fund_type="")`: Danh sÃ¡ch quá»¹ má»Ÿ (BALANCED, BOND, STOCK)
- `Fund().filter(q)`: TÃ¬m kiáº¿m quá»¹ theo tÃªn

#### `xnoapi.vn.data.quote_global`
- `Global().fx(symbol).quote.history(start, end)`: Tá»· giÃ¡ ngoáº¡i tá»‡ (USDVND, EURUSD)
- `Global().crypto(symbol).quote.history(start, end)`: Cryptocurrency (BTC, ETH)
- `Global().world_index(symbol).quote.history(start, end)`: Chá»‰ sá»‘ quá»‘c táº¿ (DJI, SPX, N225)

#### `xnoapi.vn.data.trading` (Price Board)
- `Trading.price_board(symbols)`: Báº£ng giÃ¡ realtime vá»›i thÃ´ng tin foreign, ceiling/floor

### ğŸ“ˆ PhÃ¢n tÃ­ch & Ä‘Ã¡nh giÃ¡ hiá»‡u suáº¥t

#### `xnoapi.vn.metrics.Metrics`
Bao gá»“m cÃ¡c chá»‰ sá»‘ quan trá»ng:
- **Sharpe Ratio**: ÄÃ¡nh giÃ¡ hiá»‡u suáº¥t Ä‘iá»u chá»‰nh theo rá»§i ro
- **Sortino Ratio**: Táº­p trung vÃ o downside risk
- **Calmar Ratio**: Annual Return / Max Drawdown
- **Max Drawdown**: Má»©c thua lá»— tá»‘i Ä‘a
- **Average Gain/Loss**: LÃ£i/lá»— trung bÃ¬nh
- **Win Rate**: Tá»· lá»‡ giao dá»‹ch thÃ nh cÃ´ng
- **Profit Factor**: Tá»•ng lÃ£i / Tá»•ng lá»—
- **Value at Risk (VaR)**: Rá»§i ro táº¡i má»©c tin cáº­y nháº¥t Ä‘á»‹nh
- **Risk of Ruin**: XÃ¡c suáº¥t phÃ¡ sáº£n

#### `xnoapi.vn.metrics.Backtest_Derivates`
- Logic backtesting cho chiáº¿n lÆ°á»£c giao dá»‹ch phÃ¡i sinh
- Há»— trá»£ mÃ´ hÃ¬nh phÃ­ giao dá»‹ch chuáº©n Viá»‡t Nam (transaction fee + overnight fee)
- TÃ­nh toÃ¡n PnL thÃ´ vÃ  sau phÃ­
- Æ¯á»›c tÃ­nh vá»‘n tá»‘i thiá»ƒu cáº§n thiáº¿t

#### `xnoapi.metrics.TradingBacktest` [NÃ‚NG Cáº¤P]
Lá»›p backtesting Ä‘a nÄƒng vá»›i cÃ¡c tÃ­nh nÄƒng má»›i:
- **Take Profit/Stop Loss**: `apply_tp_sl(df, tp_percentage, sl_percentage)`
- **Trailing Stop Loss**: `apply_tp_sl_trailing(df, tp_percentage, sl_percentage)`
- **Metrics tá»•ng há»£p**: Sharpe, Sortino, Calmar, Max Drawdown, Win Rate, Profit Factor, Risk of Ruin
- **Flexible PnL**: Há»— trá»£ raw vÃ  after-fees PnL calculation

## ğŸ§ª VÃ­ dá»¥ thá»±c hÃ nh

### 1. PhÃ¢n tÃ­ch dá»¯ liá»‡u Ä‘á»‹nh lÆ°á»£ng vá»›i API v2

```python
from xnoapi.vn.data.quant_data import *
import datetime as dt

# Kiá»ƒm tra káº¿t ná»‘i
if ping():
    print("âœ… Káº¿t ná»‘i thÃ nh cÃ´ng!")

# Láº¥y danh sÃ¡ch chá»‰ sá»‘
indices = get_indices()
print("CÃ¡c chá»‰ sá»‘ cÃ³ sáºµn:", indices)

# Snapshot VNINDEX
vni_snapshot = get_market_index_snapshot("VNINDEX")
print("VNINDEX hiá»‡n táº¡i:", vni_snapshot)

# ThÃ´ng tin giao dá»‹ch khá»‘i ngoáº¡i
foreign_data = get_stock_foreign_trading("VIC")
print("Foreign trading VIC:", foreign_data)
```

### 2. ÄÃ¡nh giÃ¡ chiáº¿n lÆ°á»£c giao dá»‹ch vá»›i Metrics nÃ¢ng cao

```python
from xnoapi.vn.metrics import Metrics, Backtest_Derivates
from xnoapi.vn.data import derivatives
from xnoapi.metrics import TradingBacktest
import numpy as np

# Táº¡o tÃ­n hiá»‡u giao dá»‹ch: chiáº¿n lÆ°á»£c RSI Ä‘Æ¡n giáº£n
def gen_position_rsi(df, period=14, oversold=30, overbought=70):
    """
    Chiáº¿n lÆ°á»£c RSI: Long khi RSI < oversold, Short khi RSI > overbought
    """
    delta = df["Close"].diff()
    gain = (delta.where(delta > 0, 0)).rolling(window=period).mean()
    loss = (-delta.where(delta < 0, 0)).rolling(window=period).mean()
    rs = gain / loss
    rsi = 100 - (100 / (1 + rs))
    
    position = np.where(rsi < oversold, 1,  # Long signal
                       np.where(rsi > overbought, -1, 0))  # Short signal
    
    return df.assign(position=position, rsi=rsi)

# Láº¥y dá»¯ liá»‡u vÃ  táº¡o tÃ­n hiá»‡u
print("ğŸ“¥ Äang táº£i dá»¯ liá»‡u VN30F1M...")
df = derivatives.get_hist("VN30F1M", "5m")  # 5 phÃºt cho phÃ¢n tÃ­ch chi tiáº¿t
df_pos = gen_position_rsi(df)

# Ãp dá»¥ng Take Profit/Stop Loss
backtester = TradingBacktest(df_pos)
df_pos_with_tpsl = backtester.apply_tp_sl(df_pos, tp_percentage=2.0, sl_percentage=1.5)
df_pos["position_tpsl"] = df_pos_with_tpsl

for col in df_pos.columns:
	df_pos[col.lower()] = df_pos[col]
df_pos["Date"] = df_pos["Date"].astype(str)
df_pos["time"] = df_pos["time"].astype(str)

df_pos['datetime'] = pd.to_datetime(df_pos['date'].astype(str + " " + df_pos['time']))
df_pos = df_pos.set_index('datetime')

# So sÃ¡nh chiáº¿n lÆ°á»£c gá»‘c vÃ  cÃ³ TP/SL
backtest_original = Backtest_Derivates(df_pos, pnl_type="raw")
backtest_tpsl = Backtest_Derivates(df_pos.assign(position=df_pos["position_tpsl"]), pnl_type="raw")

metrics_original = Metrics(backtest_original)
metrics_tpsl = Metrics(backtest_tpsl)

# So sÃ¡nh káº¿t quáº£
print("\nğŸ“Š SO SÃNH CHIáº¾N LÆ¯á»¢C:")
print("=" * 60)
print(f"{'Metric':<20} {'Original':<15} {'With TP/SL':<15} {'Improvement':<15}")
print("=" * 60)

sharpe_orig = metrics_original.sharpe()
sharpe_tpsl = metrics_tpsl.sharpe()
print(f"{'Sharpe Ratio':<20} {sharpe_orig:<15.3f} {sharpe_tpsl:<15.3f} {((sharpe_tpsl/sharpe_orig-1)*100 if sharpe_orig != 0 else 0):<14.1f}%")

win_rate_orig = metrics_original.win_rate()
win_rate_tpsl = metrics_tpsl.win_rate()
print(f"{'Win Rate':<20} {win_rate_orig*100:<15.1f}% {win_rate_tpsl*100:<15.1f}% {(win_rate_tpsl-win_rate_orig)*100:<14.1f}pp")

max_dd_orig = metrics_original.max_drawdown()
max_dd_tpsl = metrics_tpsl.max_drawdown()
print(f"{'Max Drawdown':<20} {max_dd_orig*100:<15.1f}% {max_dd_tpsl*100:<15.1f}% {(max_dd_tpsl-max_dd_orig)*100:<14.1f}pp")

profit_factor_orig = metrics_original.profit_factor()
profit_factor_tpsl = metrics_tpsl.profit_factor()
print(f"{'Profit Factor':<20} {profit_factor_orig:<15.3f} {profit_factor_tpsl:<15.3f} {((profit_factor_tpsl/profit_factor_orig-1)*100 if profit_factor_orig != 0 else 0):<14.1f}%")
```

### 3. PhÃ¢n tÃ­ch quá»¹ má»Ÿ vÃ  thá»‹ trÆ°á»ng quá»‘c táº¿

```python
from xnoapi.vn.data.fund import Fund
from xnoapi.vn.data.quote_global import Global
import datetime as dt

# PhÃ¢n tÃ­ch quá»¹ má»Ÿ
fund = Fund()

# TÃ¬m quá»¹ cá»• phiáº¿u
stock_funds = fund.listing(fund_type="STOCK")
print("Top 5 quá»¹ cá»• phiáº¿u:")
print(stock_funds[["name", "code", "nav", "productNavChange.navTo1Months"]].head())

# PhÃ¢n tÃ­ch danh má»¥c cá»§a má»™t quá»¹ cá»¥ thá»ƒ
if not stock_funds.empty:
    fund_code = stock_funds.iloc[0]["code"]
    holdings = Fund.details.top_holding(fund_code)
    print(f"\nDanh má»¥c top holdings cá»§a {fund_code}:")
    print(holdings.head())

# Dá»¯ liá»‡u thá»‹ trÆ°á»ng quá»‘c táº¿
glb= Global()

# So sÃ¡nh VNINDEX vá»›i cÃ¡c chá»‰ sá»‘ quá»‘c táº¿
start_date = "2024-01-01"
end_date = "2024-12-31"

vni_data = glb.world_index("VNI").quote.history(start_date, end_date)
spy_data = glb.world_index("INX").quote.history(start_date, end_date)  # S&P 500
nikkei_data = glb.world_index("N225").quote.history(start_date, end_date)

print("\nSo sÃ¡nh hiá»‡u suáº¥t chá»‰ sá»‘ 2024:")
print("=" * 40)

def calculate_return(df):
    if df.empty or df["close"].isna().all():
        return 0
    return (df["close"].iloc[-1] / df["close"].iloc[0] - 1) * 100

vni_return = calculate_return(vni_data)
spy_return = calculate_return(spy_data)
nikkei_return = calculate_return(nikkei_data)

print(f"VNINDEX: {vni_return:.2f}%")
print(f"S&P 500: {spy_return:.2f}%")
print(f"Nikkei 225: {nikkei_return:.2f}%")

# Tá»· giÃ¡ USD/VND
usd_vnd = glb.fx("USDVND").quote.history(start_date, end_date)
if not usd_vnd.empty:
    usd_change = calculate_return(usd_vnd)
    print(f"USD/VND: {usd_change:.2f}%")
```

### 4. PhÃ¢n tÃ­ch bÃ¡o cÃ¡o tÃ i chÃ­nh vÃ  thÃ´ng tin doanh nghiá»‡p

```python
from xnoapi.vn.data.company import Company
from xnoapi.vn.data.finance import Finance

# PhÃ¢n tÃ­ch VIC - Vingroup
symbol = "VIC"
company = Company(symbol)
finance = Finance(symbol)

# ThÃ´ng tin tá»•ng quan
overview = company.overview()
print("ThÃ´ng tin tá»•ng quan VIC:")
print(overview[["ticker", "exchange", "industry", "stockRating"]].iloc[0])

# Cá»• Ä‘Ã´ng lá»›n
shareholders = company.shareholders()
print("\nTop 5 cá»• Ä‘Ã´ng lá»›n:")
print(shareholders[["name", "ownPercent"]].head())

# BÃ¡o cÃ¡o tÃ i chÃ­nh
income_stmt = finance.income_statement(period='quarter')  # BÃ¡o cÃ¡o quÃ½
print("\nDoanh thu 4 quÃ½ gáº§n nháº¥t:")
print(income_stmt[["quarter", "revenue", "investProfit"]].head())

# Tá»· sá»‘ tÃ i chÃ­nh
ratios = company.ratio_summary()
print("\nCÃ¡c tá»· sá»‘ tÃ i chÃ­nh chÃ­nh:")
if not ratios.empty:
    key_ratios = ["pe", "pb", "roe", "roa", "eps"]
    available_ratios = [col for col in key_ratios if col in ratios.columns]
    if available_ratios:
        print(ratios[available_ratios].iloc[0])
```

## ğŸ†• TÃ­nh nÄƒng má»›i

### ğŸ“Š Quant Data API v2
- Dá»¯ liá»‡u OHLCV vá»›i timestamp chÃ­nh xÃ¡c Ä‘áº¿n giÃ¢y
- Order book snapshot realtime
- Foreign trading data
- Market index snapshot

### ğŸ¦ Quá»¹ má»Ÿ & TÃ i sáº£n quá»‘c táº¿
- ThÃ´ng tin quá»¹ má»Ÿ Ä‘áº§y Ä‘á»§ (cá»• phiáº¿u, trÃ¡i phiáº¿u, cÃ¢n báº±ng)
- Danh má»¥c Ä‘áº§u tÆ° vÃ  phÃ¢n bá»• tÃ i sáº£n cá»§a quá»¹
- Dá»¯ liá»‡u forex, cryptocurrency, chá»‰ sá»‘ quá»‘c táº¿

### ğŸ¯ Take Profit/Stop Loss nÃ¢ng cao
- Fixed TP/SL vá»›i hold mechanism
- Trailing Stop Loss Ä‘á»™ng
- Backtesting vá»›i risk management tá»± Ä‘á»™ng

### ğŸ“ˆ Metrics má»Ÿ rá»™ng
- Risk of Ruin calculation
- Value at Risk (VaR)
- Calmar Ratio
- Enhanced Sortino Ratio

### ğŸ¢ ThÃ´ng tin doanh nghiá»‡p chi tiáº¿t
- BÃ¡o cÃ¡o tÃ i chÃ­nh theo quÃ½/nÄƒm
- ThÃ´ng tin cá»• Ä‘Ã´ng, ban lÃ£nh Ä‘áº¡o
- Tin tá»©c vÃ  sá»± kiá»‡n quan trá»ng
- Tá»· sá»‘ tÃ i chÃ­nh tá»•ng há»£p

## ğŸŒŸ Cá»™ng Ä‘á»“ng & Há»— trá»£

XNO phÃ¡t triá»ƒn nhá» sá»± chung tay cá»§a cá»™ng Ä‘á»“ng nhá»¯ng ngÆ°á»i yÃªu thÃ­ch cÃ´ng nghá»‡ vÃ  tÃ i chÃ­nh Ä‘á»‹nh lÆ°á»£ng. Má»—i dÃ²ng code, má»—i báº£n sá»­a lá»—i Ä‘á»u lÃ  minh chá»©ng cho sá»± Ä‘Ã³ng gÃ³p quÃ½ giÃ¡ cá»§a cÃ¡c báº¡n.

### ğŸ’¬ Tham gia cá»™ng Ä‘á»“ng
ğŸŒ **Website chÃ­nh thá»©c**: [xno.vn](https://xno.vn) - Tin tá»©c, blog, vÃ  tÃ i nguyÃªn  
ğŸ‘¥ **Cá»™ng Ä‘á»“ng Quant**: [xnoquant.vn](https://xnoquant.vn) - Tháº£o luáº­n, chia sáº» chiáº¿n lÆ°á»£c  
ğŸ“§ **Há»— trá»£**: support@xno.vn  
ğŸ› **BÃ¡o lá»—i**: GitHub Issues  

### ğŸ¤ ÄÃ³ng gÃ³p
ChÃºng tÃ´i hoan nghÃªnh má»i Ä‘Ã³ng gÃ³p tá»« cá»™ng Ä‘á»“ng! Báº¡n cÃ³ thá»ƒ:
- ğŸŒŸ Star dá»± Ã¡n trÃªn GitHub
- ğŸ› BÃ¡o cÃ¡o lá»—i hoáº·c Ä‘á» xuáº¥t tÃ­nh nÄƒng
- ğŸ“– Cáº£i thiá»‡n tÃ i liá»‡u
- ğŸ’» ÄÃ³ng gÃ³p code

## âš ï¸ TuyÃªn bá»‘ miá»…n trÃ¡ch nhiá»‡m

XNO API Ä‘Æ°á»£c phÃ¡t triá»ƒn nháº±m phá»¥c vá»¥ má»¥c Ä‘Ã­ch nghiÃªn cá»©u vÃ  sá»­ dá»¥ng cÃ¡ nhÃ¢n. Dá»¯ liá»‡u cung cáº¥p cÃ³ thá»ƒ khÃ´ng Ä‘áº§y Ä‘á»§, khÃ´ng liÃªn tá»¥c hoáº·c sai lá»‡ch so vá»›i thá»±c táº¿, do Ä‘Ã³ khÃ´ng khuyáº¿n nghá»‹ sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch giao dá»‹ch thá»±c táº¿, thuáº­t toÃ¡n Ä‘áº§u tÆ°, hoáº·c ra quyáº¿t Ä‘á»‹nh tÃ i chÃ­nh khi báº¡n khÃ´ng hiá»ƒu rÃµ.

CÃ¡c tÃ¡c giáº£ khÃ´ng chá»‹u trÃ¡ch nhiá»‡m Ä‘á»‘i vá»›i báº¥t ká»³ tá»•n tháº¥t hay thiá»‡t háº¡i nÃ o phÃ¡t sinh tá»« viá»‡c sá»­ dá»¥ng dá»¯ liá»‡u hoáº·c mÃ£ nguá»“n nÃ y, bao gá»“m nhÆ°ng khÃ´ng giá»›i háº¡n: sai lá»‡ch dá»¯ liá»‡u, máº¥t mÃ¡t tÃ i chÃ­nh, hoáº·c sá»­ dá»¥ng sai má»¥c Ä‘Ã­ch.

XNO API khÃ´ng cung cáº¥p tÆ° váº¥n Ä‘áº§u tÆ° hay tÃ­n hiá»‡u giao dá»‹ch. NgÆ°á»i dÃ¹ng hoÃ n toÃ n tá»± chá»‹u trÃ¡ch nhiá»‡m khi sá»­ dá»¥ng thÆ° viá»‡n.

## ğŸ“„ Giáº¥y phÃ©p

XNO API Ä‘Æ°á»£c phÃ¡t hÃ nh theo **Giáº¥y phÃ©p MIT**. Xem chi tiáº¿t táº¡i [LICENSE](https://github.com/xnoproject/xnoapi/blob/main/LICENSE).
